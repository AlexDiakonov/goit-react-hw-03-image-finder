{"ast":null,"code":"import _toConsumableArray from\"/Users/macos/Desktop/ReactJs/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/macos/Desktop/ReactJs/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/macos/Desktop/ReactJs/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/macos/Desktop/ReactJs/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/macos/Desktop/ReactJs/goit-react-hw-03-image-finder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Searchbar from'./components/Searchbar.jsx';import fetchPics from'./fetch';import GalleryItem from'./components/ImageGalleryItem';import Button from'./components/Button';import Spinner from'./components/Spinner.jsx';import style from'./style.module.css';import Modal from'./components/Modal.jsx';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={pics:[],error:null,loading:false,searchQuery:'',page:1,showModal:false,largeImgUrl:'',largeAlt:''};_this.doFetch=function(){var _this$state=_this.state,searchQuery=_this$state.searchQuery,page=_this$state.page;_this.setState({loading:true});fetchPics(searchQuery,page).then(function(pics){return _this.setState(function(prevState){return{pics:[].concat(_toConsumableArray(prevState.pics),_toConsumableArray(pics)),page:prevState.page+1};});}).catch(function(error){return _this.setState({error:error});}).finally(function(){return _this.setState({loading:false});});};_this.handleQuerySaver=function(query){_this.setState({searchQuery:query});};_this.smoothScroll=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:'smooth'});};_this.showModal=function(e){var largeUrl=e.target.dataset.url;var largeAlt=e.target.alt;_this.setState({showModal:true,largeImageURL:largeUrl,largeAlt:largeAlt});};_this.closeModal=function(){_this.setState({showModal:false,largeImgUrl:'',largeAlt:''});};return _this;}_createClass(App,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var prevQuery=prevState.searchQuery;var nextQuery=this.state.searchQuery;if(prevQuery!==nextQuery){this.setState({pics:[],page:1});this.doFetch();}var prevPage=prevState.page;var nextPage=this.state.page;if(prevPage<nextPage){this.smoothScroll();}}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,pics=_this$state2.pics,loading=_this$state2.loading,showModal=_this$state2.showModal,largeImageURL=_this$state2.largeImageURL,largeAlt=_this$state2.largeAlt;return/*#__PURE__*/React.createElement(\"div\",{className:style.App},/*#__PURE__*/React.createElement(Searchbar,{onSubmit:this.handleQuerySaver}),/*#__PURE__*/React.createElement(\"ul\",{className:style.ImageGallery},pics.map(function(pic){return/*#__PURE__*/React.createElement(GalleryItem,{showModal:_this2.showModal,key:pic.id,id:pic.id,src:pic.webformatURL,alt:pic.tags,largeUrl:pic.largeImageURL});})),loading&&/*#__PURE__*/React.createElement(Spinner,null),pics.length>0&&/*#__PURE__*/React.createElement(Button,{loadMore:this.doFetch}),showModal&&/*#__PURE__*/React.createElement(Modal,{closeModal:this.closeModal,imgUrl:largeImageURL,alt:largeAlt}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/macos/Desktop/ReactJs/goit-react-hw-03-image-finder/src/App.js"],"names":["React","Component","Searchbar","fetchPics","GalleryItem","Button","Spinner","style","Modal","App","state","pics","error","loading","searchQuery","page","showModal","largeImgUrl","largeAlt","doFetch","setState","then","prevState","catch","finally","handleQuerySaver","query","smoothScroll","window","scrollTo","top","document","documentElement","scrollHeight","behavior","e","largeUrl","target","dataset","url","alt","largeImageURL","closeModal","prevProps","prevQuery","nextQuery","prevPage","nextPage","ImageGallery","map","pic","id","webformatURL","tags","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Searchbar from './components/Searchbar.jsx';\nimport fetchPics from './fetch';\nimport GalleryItem from './components/ImageGalleryItem';\nimport Button from './components/Button';\nimport Spinner from './components/Spinner.jsx';\nimport style from './style.module.css';\nimport Modal from './components/Modal.jsx';\n\nclass App extends Component {\n  state = {\n    pics: [],\n    error: null,\n    loading: false,\n    searchQuery: '',\n    page: 1,\n    showModal: false,\n    largeImgUrl: '',\n    largeAlt: '',\n  };\n\n  doFetch = () => {\n    const { searchQuery, page } = this.state;\n    this.setState({ loading: true });\n    fetchPics(searchQuery, page)\n      .then((pics) =>\n        this.setState((prevState) => ({\n          pics: [...prevState.pics, ...pics],\n          page: prevState.page + 1,\n        }))\n      )\n      .catch((error) => this.setState({ error }))\n      .finally(() => this.setState({ loading: false }));\n  };\n  handleQuerySaver = (query) => {\n    this.setState({ searchQuery: query });\n  };\n  smoothScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n  showModal = (e) => {\n    const largeUrl = e.target.dataset.url;\n    const largeAlt = e.target.alt;\n    this.setState({\n      showModal: true,\n      largeImageURL: largeUrl,\n      largeAlt: largeAlt,\n    });\n  };\n  closeModal = () => {\n    this.setState({ showModal: false, largeImgUrl: '', largeAlt: '' });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.searchQuery;\n    const nextQuery = this.state.searchQuery;\n    if (prevQuery !== nextQuery) {\n      this.setState({ pics: [], page: 1 });\n      this.doFetch();\n    }\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n    if (prevPage < nextPage) {\n      this.smoothScroll();\n    }\n  }\n  render() {\n    const { pics, loading, showModal, largeImageURL, largeAlt } = this.state;\n    return (\n      <div className={style.App}>\n        <Searchbar onSubmit={this.handleQuerySaver} />\n        <ul className={style.ImageGallery}>\n          {pics.map((pic) => (\n            <GalleryItem\n              showModal={this.showModal}\n              key={pic.id}\n              id={pic.id}\n              src={pic.webformatURL}\n              alt={pic.tags}\n              largeUrl={pic.largeImageURL}\n            />\n          ))}\n        </ul>\n        {loading && <Spinner />}\n        {pics.length > 0 && <Button loadMore={this.doFetch} />}\n        {showModal && (\n          <Modal\n            closeModal={this.closeModal}\n            imgUrl={largeImageURL}\n            alt={largeAlt}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}